image: rubenchristoffer/php7_mysql_codeception_composer

# Select what we should cache
cache:
  paths:
    - vendor/

before_script:
  # Install all project dependencies
  - composer install
  # Run webserver
  - php -S localhost:8085 --docroot public &>/dev/null&
  # Run mysql
  - service mysql start
  # Create test database
  - mysql -u root -e "CREATE DATABASE db_project"

# Test
test:
  script:
    - vendor/bin/codecept run
